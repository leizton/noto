{"lines":[{"id":"8FC42A41-ECB7-4730-9548-E271FB5B0E16","content":"c++语法\n","styles":[],"paragraphType":"title","attachments":[]},{"id":"B295496B-A048-4E54-B3B7-6CAD13E16FB8","content":"\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"987B3608-4B3E-405A-A3EE-6643F89FEB95","content":"\n","styles":[],"attachments":[]},{"id":"C4339BA7-1797-484E-98EE-8267E543E92C","content":"## 头文件里实现的函数必须加inline，否则出duplicate symbol\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"D405B922-0B5F-41EF-A3EE-D3D68A0B1F3F","content":"#### 头文件里有实现的函数只能是inline和函数模板\n","styles":[],"attachments":[]},{"id":"7B4B04B7-0C07-4985-9664-B8F434BF8DF5","content":".cc include头文件时是内容直接复制进来，所以如果.h里包含非inline函数的实现，当多个.cc include他时会出现重复定义的编译错误\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"CAF55FA8-1855-4698-BC50-0DA03FFC681C","content":"class头文件的函数默认是inline，所以写实现不会报重复定义\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"1FEB2C84-0459-44EB-84F8-20ED767F7441","content":"￼\n","styles":[],"paragraphType":"body","attachments":[{"percentageWidth":1,"content":"https:\/\/blog.csdn.net\/aiaiai010101\/article\/details\/78178086","type":"link","name":"0C9FB993-D16E-4004-9AF2-39D7A538E790","location":0}]},{"id":"26FF44B8-2D26-4247-BA37-88DE21261E4E","content":"\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"588CEDEA-16C0-4F26-87B5-DC89BAB869CA","content":"\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"511419B8-A033-4753-ADDE-06815577AA4C","content":"## static\/override不需要出现在.cc，const需要\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"B355EA88-8D1B-40B7-8CE3-23B5537D241C","content":"￼\n","styles":[],"paragraphType":"body","attachments":[{"percentageWidth":0.625,"content":"cpp","caption":{"lines":[{"id":"4D82BC22-0028-41F9-B009-5F30BE22CF81","content":"\/\/ aoo.h\n","styles":[],"attachments":[]},{"id":"68DBAC52-6D67-4BAB-A6E6-F3B49C572272","content":"class Aoo {\n","styles":[],"attachments":[]},{"id":"4DB470BC-4316-4239-A04A-E3E185B6410A","content":"  int get() const;\n","styles":[],"attachments":[]},{"id":"B1F8FFCF-A17D-41B7-A26B-D8B6033C02B4","content":"  static const int num;\n","styles":[],"attachments":[]},{"id":"318CCFB8-FE6C-496A-8D19-92063D7024F6","content":"};\n","styles":[],"attachments":[]},{"id":"CB9221F8-9C81-467F-98A7-0A636046CBDA","content":"\/\/ aoo.cpp\n","styles":[],"attachments":[]},{"id":"2871C5DD-26F7-49EC-AC66-AE2176C3F524","content":"const int Aoo::num = 10;\n","styles":[],"attachments":[]},{"id":"DAEF8CD8-0B16-4AD6-AD42-CA3C237B50F9","content":"int Aoo::get() const { return a_; }","styles":[],"attachments":[]}]},"type":"code","name":"E1CB22C5-0274-4EE5-BD6D-194E45CA03C6.","location":0}]},{"id":"33D7CF5C-8153-4F81-A0E7-856D166FF322","content":"\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"CA1F6A5E-8E3D-43A0-823B-876522EB6365","content":"\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"BA13DAD3-7BE7-4715-AF22-12154582E18E","content":"## 类的const成员变量\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"8B8E8273-AFB2-4764-B729-F5BD1A9B173A","content":"￼\n","styles":[],"paragraphType":"body","attachments":[{"percentageWidth":0.625,"content":"cpp","caption":{"lines":[{"id":"BBFE4D74-0260-4C8B-9F31-CAD9EA8DF28E","content":"class Aoo {\n","styles":[],"attachments":[]},{"id":"B2158866-FA49-454B-A529-E78C430C2B9A","content":"  const int a_;\n","styles":[],"attachments":[]},{"id":"D1145F61-71D1-4EEF-BA03-C6E3C659ED00","content":"};","styles":[],"attachments":[]}]},"type":"code","name":"E1CB22C5-0274-4EE5-BD6D-194E45CA03C6. 2","location":0}]},{"id":"9A50347B-9D9E-4080-889F-BF61D71251CB","content":"\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"4DF26920-CE51-4318-B70B-6CAC90EF8B40","content":"\n","styles":[],"attachments":[]},{"id":"4AD3AB0C-FE03-4870-BF70-EFAA669F2435","content":"## typename\n","styles":[],"attachments":[]},{"id":"1C56DBB5-7113-4D91-8DB4-9C541B7FE762","content":"￼\n","styles":[],"paragraphType":"body","attachments":[{"percentageWidth":0.625,"content":"cpp","caption":{"lines":[{"id":"6F748242-4C6A-44B9-8817-493BA15F7A8A","content":"template <class T>\n","styles":[],"attachments":[]},{"id":"2612D80A-C356-4519-A016-153157B65462","content":"void foo() {\n","styles":[],"attachments":[]},{"id":"01097A43-C21E-4444-A00D-F5CC7E0C731C","content":"\tT::iterator * iter;\n","styles":[],"attachments":[]},{"id":"76AE7948-B85D-4115-8F57-E2D0D561EB87","content":"\t\/\/ ...\n","styles":[],"attachments":[]},{"id":"EC6EBA38-CA73-4ABD-BEE0-4F7D0B287515","content":"}","styles":[],"attachments":[]}]},"type":"code","name":"E1CB22C5-0274-4EE5-BD6D-194E45CA03C6. 2 2","location":0}]},{"id":"7DAD2C69-70AD-4143-A37D-EB1E8A2CEA27","content":"T::iterator可能是T的静态函数、静态成员变量、嵌套类型\n","styles":[],"attachments":[]},{"id":"ED0AE004-5B6D-45CD-B9B5-3C47D101D151","content":"如果是静态成员变量：[1] 当iterator未定义，则报错；[2] 当iter是全局变量名，则*可以被解释成乘法\n","styles":[],"attachments":[]},{"id":"8F67B734-3279-4D5B-9930-9F8E30602DFC","content":"所以引入typename，指定T::iterator是一种类型\n","styles":[],"attachments":[]},{"id":"4EB93FCE-7037-4BD8-83A1-4FD981A0B8A7","content":"￼\n","styles":[],"paragraphType":"body","attachments":[{"percentageWidth":1,"content":"http:\/\/feihu.me\/blog\/2014\/the-origin-and-usage-of-typename\/#%E5%BC%95%E5%85%A5typename%E7%9A%84%E7%9C%9F%E5%AE%9E%E5%8E%9F%E5%9B%A0","type":"link","name":"5178CB35-5009-42F5-9C73-D09F5556C1E8","location":0}]},{"id":"CEF73DA2-B301-4456-8F3F-7C709A280AF6","content":"\n","styles":[],"attachments":[]},{"id":"46A3E858-CB89-4AE9-BBB3-89571AF1B3E2","content":"\n","styles":[],"attachments":[]},{"id":"1A13B0E7-EF5A-4E6F-9A4B-2D7E1EC647CE","content":"## std::to_string  std::stoi  std::atoi\n","styles":[],"attachments":[]},{"id":"E27FAAE5-6589-4064-8D92-434D1868865A","content":"to_string (int) (long) (long long) (unsigned) (unsigned long) (unsigned long long) (float) (double) (long double)\n","styles":[],"attachments":[]},{"id":"C2E4EB69-D5B4-4D3E-B87E-EB95AD22A077","content":"stoi(const string&, size_t* pos=0, int base=10) int    \/\/ *pos是处理的字符数\n","styles":[],"attachments":[]},{"id":"BD53EEC4-4CA7-4BDA-8D5B-DA7976F4B76A","content":"stol(...) long\n","styles":[],"attachments":[]},{"id":"B6357747-284E-49EA-872A-A95C668BD8FB","content":"stoll(...) long long\n","styles":[],"attachments":[]},{"id":"F6F1B3F6-6BF2-4520-87CB-FF7CC646C3F4","content":"atoi(const char*) int\n","styles":[],"attachments":[]},{"id":"1773AA88-6E04-411D-82E0-7D3426606B14","content":"atol(...) long\n","styles":[],"attachments":[]},{"id":"7A20E968-6942-425B-B150-AA50BECA4129","content":"atoll(...) long long\n","styles":[],"attachments":[]},{"id":"0135C5D8-540D-42B7-9014-924B63C0E0BB","content":"\n","styles":[],"attachments":[]},{"id":"493E8D92-68CA-46D0-9365-354B12E24DFC","content":"\n","styles":[],"attachments":[]},{"id":"FE180D4E-E84B-4A6E-85FD-6EBBC86B0611","content":"## INT32_MIN\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"9F748FA3-BC16-4032-904C-C9D37990C7D1","content":"#include <stdint.h>\n","styles":[],"attachments":[]},{"id":"CDFDED90-5298-4767-87D1-32451C80FA58","content":"INT32_MIN\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"9C2010DF-15ED-49D5-B511-87B03D702CE8","content":"INT32_MAX\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"C45B1177-0A41-4AEA-9F80-37987DB3B361","content":"UINT32_MAX\n","styles":[],"attachments":[]},{"id":"4F4B63C0-AC04-4517-9E8B-242D37FE433F","content":"\n","styles":[],"attachments":[]},{"id":"F8326A67-E301-4937-B813-6C96B6B40F63","content":"\n","styles":[],"attachments":[]},{"id":"2411A228-89F8-4AB1-986F-B218AA958A75","content":"## gcc的aligned和packed属性\n","styles":[],"attachments":[]},{"id":"D43A452D-065C-4BED-AB7A-961AA9622726","content":"gcc支持用__attribute__为变量、类型、函数、标签指定特殊属性\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"6C62A02F-D521-4C70-A80C-78968E8F96A7","content":"#### aligned用于变量\n","styles":[],"attachments":[]},{"id":"6CEACB81-CAEE-4CEE-8072-F7BCF68A45EA","content":"aligned常用在变量声明上。它的作用是告诉GCC，为变量分配内存时，要分配在对齐的内存地址上。例如：\n","styles":[],"attachments":[]},{"id":"E20F50E9-EEB8-42C3-9F4C-8DE3E21115E7","content":"int x __attribute__ ((aligned (8))) = 0;\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"40A3913F-1F53-4DEB-AA93-7FD8CDF40B3C","content":"告诉编译器把变量x分配在8字节对齐的内存地址上，而非默认的4字节对齐\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"ED95F139-7715-4AA6-AEA8-C5DFAD5894EA","content":"#### aligned用于结构体\n","styles":[],"attachments":[]},{"id":"EC3C95EF-B4EC-4002-8357-4A79B9DF545E","content":"struct __attribute__ ((aligned (8)))\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"92F32993-231E-46C1-9502-BA497D028E97","content":"Too {\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"F16D4441-D0D0-4F65-8AB1-BAB4DE76812C","content":"  bool a;\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"7BF735C0-9902-4A3E-940F-A8BC9F42AD08","content":"  int16_t b;\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"5E849BDC-B018-4A89-AC62-8DEDA0BC3721","content":"};\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"FDCDF06F-310B-4EDF-ABF6-D34B5281BE6D","content":"用(aligned(8))时，sizeof(Too)==8\n","styles":[],"attachments":[]},{"id":"C3872A82-8B3C-4460-98A9-101EC0D18011","content":"用(aligned(4))时，sizeof(Too)==4\n","styles":[],"attachments":[]},{"id":"C4DAA525-C11F-4F31-A4AB-56B00D26954C","content":"#### packed\n","styles":[],"attachments":[]},{"id":"1D4FDD9D-6BC8-417F-9038-4E8C18372B61","content":"packed属性的目的是让编译器更紧凑地使用内存。例如：\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"DE973337-5000-47C8-9158-55DD43B0C4A4","content":"struct __attribute__ ((packed))\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"BE1EF509-B648-4383-9E34-64A8A7929F42","content":"Too {\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"BAF842DD-B9E9-4ABC-B14C-E28F8DE3387E","content":"  bool a;\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"CF3DD173-4ED7-4AEC-A622-9B9A7B6A6766","content":"  int16_t b;\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"1054B228-BBCD-48C4-B3AB-56845BEB5B42","content":"};\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"54A235E8-4420-4B2F-BB59-DC5DB4CAC8FF","content":"sizeof(Too)==3\n","styles":[],"attachments":[]},{"id":"CA608522-1C3A-4DFF-B13D-13F3FDA7581D","content":"#### packed的使用场景\n","styles":[],"attachments":[]},{"id":"C10444BE-52B1-4CC5-85C2-93A1222F2DFF","content":"处理跟文件格式或网络协议有关的二进制数据。\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"862EFC5F-AA3E-40C1-B635-1F08E7B25824","content":"这些格式或协议是不能容忍多余字节的，所以当用结构体表示其数据时，必须阻止编译器填充字节。\n","styles":[],"paragraphType":"body","attachments":[]},{"id":"DA7D16EA-8F6F-4EC9-888F-8FA979E6BB7C","content":"\n","styles":[],"attachments":[]},{"id":"DB561707-7752-47F3-A50B-FE97B617A7EE","content":"\n","styles":[],"attachments":[]},{"id":"BB1B821D-0E9A-4ADE-8C91-344D9EB5F7E5","content":"## new (std::nothrow)\n","styles":[],"attachments":[]},{"id":"D564A373-21B3-4248-84D5-C7CC5982BA17","content":"new (std::nothrow) T 在分配失败时返回nullptr，而不是抛异常\n","styles":[{"type":"highlight","range":[0,17],"color":"#50b6ff"},{"type":"highlight","range":[17,20],"color":"#50b6ff"}],"paragraphType":"body","attachments":[]},{"id":"C980C33B-614D-4F4E-9746-731AB721D00B","content":"\n","styles":[],"attachments":[]},{"id":"F3431286-0466-4C32-9CF9-45766BBE1586","content":"\n","styles":[],"attachments":[]},{"id":"6461A98D-8856-42C8-AF44-F1CAA8BA60A6","content":"\n","styles":[],"attachments":[]},{"id":"7FD54899-B689-40C7-8FF9-A25E24B65AE5","content":"\n","styles":[],"attachments":[]},{"id":"10E56450-4B8F-44F9-ABD7-3E0518B3DD45","content":"\n","styles":[],"attachments":[]},{"id":"D7AD12D2-29E1-428F-999F-D5DD04B655E6","content":"\n","styles":[],"attachments":[]},{"id":"E7772B08-CAA8-45A4-950E-86E21EBDC6E6","content":"\n","styles":[],"attachments":[]},{"id":"FA31238C-A7FE-47D3-84B9-1699D70BBEE4","content":"\n","styles":[],"attachments":[]},{"id":"FDF05136-8E03-40B1-87E3-E304115DBB69","content":"\n","styles":[],"attachments":[]},{"id":"C8669CD4-020F-4E28-9599-804E4CA48E45","content":"\n","styles":[],"attachments":[]},{"id":"339B3BAD-059B-4160-A78E-BD0CAD1276D2","content":"\n","styles":[],"attachments":[]},{"id":"FC6C7780-4B2E-4570-8CB6-3CCF74E4A22E","content":"\n","styles":[],"attachments":[]},{"id":"46A6A3FA-52A0-4256-9BB3-335D94E928B6","content":"\n","styles":[],"attachments":[]},{"id":"585ADFA7-11F5-4CCD-964F-3EEE6A012752","content":"\n","styles":[],"attachments":[]},{"id":"3D6602D9-48FB-45FF-80C7-875D9156F08E","content":"\n","styles":[],"attachments":[]},{"id":"CE61B497-DF00-4BD5-9828-4FAF8EFC6582","content":"\n","styles":[],"attachments":[]},{"id":"0670A97D-3B6F-4513-96DD-FCB1847F578A","content":"\n","styles":[],"attachments":[]},{"id":"A284099F-2B1F-4B98-A16C-6734C1EA0450","content":"\n","styles":[],"attachments":[]},{"id":"77ECC29C-129C-4E2A-A34C-BBC35F68824D","content":"\n","styles":[],"attachments":[]},{"id":"B594C5A4-8324-4517-A60C-A3B7BDB2971F","content":"\n","styles":[],"attachments":[]},{"id":"C57CC856-3A3E-44D2-ACC4-1725979E012C","content":"","styles":[],"attachments":[]}]}